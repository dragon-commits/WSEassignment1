"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/getChats";
exports.ids = ["pages/api/getChats"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "(api)/./pages/api/getChats.js":
/*!*******************************!*\
  !*** ./pages/api/getChats.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getChats)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n//import { withIronSessionSsr } from \"iron-session/next\";\n\nfunction getChats(req, res) {\n    // console.log(\"getChat \"+(data));\n    // const username = req.body.username;\n    //const element = {};\n    // Replace the uri string with your MongoDB deployment's connection string.\n    const uri = \"mongodb://root:example@0.0.0.0:6666\";\n    // create mongo connection client\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri);\n    async function run() {\n        try {\n            const database = client.db(\"courses\");\n            const col = database.collection(\"chats\");\n            // query for col that have a runtime less than 15 minutes\n            //const query = {};\n            //const options = {};\n            // const doc = {\n            // username: username\n            //}\n            // const cursor = await col.find(doc).project({ _id: 0, username: 1, content: 1 });\n            const cursor = await col.find({}).project({\n                _id: 0,\n                username: 1,\n                content: 1\n            }).toArray();\n            console.log(\"Mongo Results:\");\n            console.log(cursor);\n            res.status(200).json(cursor);\n        //.toArray().then(docs => JSON.stringify(docs));\n        //.then((response) => response.json())    .then((user) => {      return user.cursor;    });\n        //  const printAddress = () => {      cursor.then((a) => {        console.log(a);      });\n        //.toArray().then(docs => console.log(\"all documents\",JSON.stringify(docs))).replace([],'');\n        //const results = cursor.forEach((element) => element.json());\n        //cursor.forEach(printjson);\n        //const results = cursor);\n        // loop over the documents \n        //const result = cursor.forEach((element) => {\n        //  console.log(element)\n        //res.status(200).json(element);\n        //});\n        //res.status(200).json(result);\n        //res.status(200).json(result);\n        //buffer = buffer + element;\n        //const results = async () =>{\n        //const a = await cursor;\n        // async return back the records\n        //const results = () => cursor.then(())\n        /*.then(cursor = () => {\r\n      cursor.then((a) => {\r\n        console.log(a);\r\n      });\r\n    });*/ // const results = printAddress();\n        //res.status(200).json(results);\n        //console.log(\"query returned \"+ a);\n        //      };\n        //res.status(200).json(printAddress);   \n        //console.log(\"Final result is \"+results);\n        } finally{\n            await client.close();\n        }\n    }\n    run().catch(console.dir);\n//res.status(200).json(element);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2V0Q2hhdHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEseURBQXlEO0FBQ3BCO0FBRXRCLFNBQVNDLFFBQVEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFFMUMsa0NBQWtDO0lBQ2xDLHNDQUFzQztJQUNyQyxxQkFBcUI7SUFFdkIsMkVBQTJFO0lBQzNFLE1BQU1DLEdBQUcsR0FBRyxxQ0FBcUM7SUFFakQsaUNBQWlDO0lBQ2pDLE1BQU1DLE1BQU0sR0FBRyxJQUFJTCxnREFBVyxDQUFDSSxHQUFHLENBQUM7SUFFbkMsZUFBZUUsR0FBRyxHQUFHO1FBRW5CLElBQUk7WUFFRixNQUFNQyxRQUFRLEdBQUdGLE1BQU0sQ0FBQ0csRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUNyQyxNQUFNQyxHQUFHLEdBQUdGLFFBQVEsQ0FBQ0csVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUV4Qyx5REFBeUQ7WUFDekQsbUJBQW1CO1lBQ25CLHFCQUFxQjtZQUV0QixnQkFBZ0I7WUFDZCxxQkFBcUI7WUFDdEIsR0FBRztZQUVKLG1GQUFtRjtZQUVuRixNQUFNQyxNQUFNLEdBQUcsTUFBTUYsR0FBRyxDQUFDRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUNDLE9BQU8sQ0FBQztnQkFBRUMsR0FBRyxFQUFFLENBQUM7Z0JBQUVDLFFBQVEsRUFBRSxDQUFDO2dCQUFFQyxPQUFPLEVBQUUsQ0FBQzthQUFFLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO1lBQ3hGQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQzlCRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1IsTUFBTSxDQUFDLENBQUM7WUFDcEJSLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDVixNQUFNLENBQUMsQ0FBQztRQUk3QixnREFBZ0Q7UUFDL0MsMkZBQTJGO1FBRTdGLDBGQUEwRjtRQUV4Riw0RkFBNEY7UUFDNUYsOERBQThEO1FBQzlELDRCQUE0QjtRQUM1QiwwQkFBMEI7UUFDMUIsMkJBQTJCO1FBSTNCLDhDQUE4QztRQUU5Qyx3QkFBd0I7UUFFNUIsZ0NBQWdDO1FBQ2hDLEtBQUs7UUFFTCwrQkFBK0I7UUFDM0IsK0JBQStCO1FBRXpCLDRCQUE0QjtRQUM1Qiw4QkFBOEI7UUFDOUIseUJBQXlCO1FBQ1QsZ0NBQWdDO1FBRXRELHVDQUF1QztRQUV2QztRQU9BO1FBQ0E7UUFFQTtRQUNNO1FBQ1Y7UUFFRSxTQUFVO1lBRVIsTUFBTU47UUFDUixDQUFDO0lBQ0gsQ0FBQztJQUVEQyxHQUFHLEVBQUUsQ0FBQ2lCLEtBQUssQ0FBQ0w7QUFDWixnQ0FBZ0M7QUFFaEMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3BhZ2VzL2FwaS9nZXRDaGF0cy5qcz9iMWRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vaW1wb3J0IHsgd2l0aElyb25TZXNzaW9uU3NyIH0gZnJvbSBcImlyb24tc2Vzc2lvbi9uZXh0XCI7XHJcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYicgXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDaGF0cyhyZXEsIHJlcykge1xyXG5cclxuIC8vIGNvbnNvbGUubG9nKFwiZ2V0Q2hhdCBcIisoZGF0YSkpO1xyXG4gLy8gY29uc3QgdXNlcm5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcclxuICAvL2NvbnN0IGVsZW1lbnQgPSB7fTtcclxuXHJcbi8vIFJlcGxhY2UgdGhlIHVyaSBzdHJpbmcgd2l0aCB5b3VyIE1vbmdvREIgZGVwbG95bWVudCdzIGNvbm5lY3Rpb24gc3RyaW5nLlxyXG5jb25zdCB1cmkgPSBcIm1vbmdvZGI6Ly9yb290OmV4YW1wbGVAMC4wLjAuMDo2NjY2XCI7XHJcblxyXG4vLyBjcmVhdGUgbW9uZ28gY29ubmVjdGlvbiBjbGllbnRcclxuY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBydW4oKSB7XHJcblxyXG4gIHRyeSB7XHJcblxyXG4gICAgY29uc3QgZGF0YWJhc2UgPSBjbGllbnQuZGIoXCJjb3Vyc2VzXCIpO1xyXG4gICAgY29uc3QgY29sID0gZGF0YWJhc2UuY29sbGVjdGlvbihcImNoYXRzXCIpO1xyXG5cclxuICAgIC8vIHF1ZXJ5IGZvciBjb2wgdGhhdCBoYXZlIGEgcnVudGltZSBsZXNzIHRoYW4gMTUgbWludXRlc1xyXG4gICAgLy9jb25zdCBxdWVyeSA9IHt9O1xyXG4gICAgLy9jb25zdCBvcHRpb25zID0ge307XHJcblxyXG4gICAvLyBjb25zdCBkb2MgPSB7XHJcbiAgICAgLy8gdXNlcm5hbWU6IHVzZXJuYW1lXHJcbiAgICAvL31cclxuICAgIFxyXG4gICAvLyBjb25zdCBjdXJzb3IgPSBhd2FpdCBjb2wuZmluZChkb2MpLnByb2plY3QoeyBfaWQ6IDAsIHVzZXJuYW1lOiAxLCBjb250ZW50OiAxIH0pO1xyXG4gICAgXHJcbiAgIGNvbnN0IGN1cnNvciA9IGF3YWl0IGNvbC5maW5kKHt9KS5wcm9qZWN0KHsgX2lkOiAwLCB1c2VybmFtZTogMSwgY29udGVudDogMSB9KS50b0FycmF5KCk7XHJcbiAgIGNvbnNvbGUubG9nKFwiTW9uZ28gUmVzdWx0czpcIik7XHJcbiAgIGNvbnNvbGUubG9nKGN1cnNvcik7XHJcbiAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGN1cnNvcik7XHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIC8vLnRvQXJyYXkoKS50aGVuKGRvY3MgPT4gSlNPTi5zdHJpbmdpZnkoZG9jcykpO1xyXG4gICAgLy8udGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkgICAgLnRoZW4oKHVzZXIpID0+IHsgICAgICByZXR1cm4gdXNlci5jdXJzb3I7ICAgIH0pO1xyXG4gICAgXHJcbiAgLy8gIGNvbnN0IHByaW50QWRkcmVzcyA9ICgpID0+IHsgICAgICBjdXJzb3IudGhlbigoYSkgPT4geyAgICAgICAgY29uc29sZS5sb2coYSk7ICAgICAgfSk7XHJcbiAgXHJcbiAgICAvLy50b0FycmF5KCkudGhlbihkb2NzID0+IGNvbnNvbGUubG9nKFwiYWxsIGRvY3VtZW50c1wiLEpTT04uc3RyaW5naWZ5KGRvY3MpKSkucmVwbGFjZShbXSwnJyk7XHJcbiAgICAvL2NvbnN0IHJlc3VsdHMgPSBjdXJzb3IuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5qc29uKCkpO1xyXG4gICAgLy9jdXJzb3IuZm9yRWFjaChwcmludGpzb24pO1xyXG4gICAgLy9jb25zdCByZXN1bHRzID0gY3Vyc29yKTtcclxuICAgIC8vIGxvb3Agb3ZlciB0aGUgZG9jdW1lbnRzIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgLy9jb25zdCByZXN1bHQgPSBjdXJzb3IuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICBcclxuICAgIC8vICBjb25zb2xlLmxvZyhlbGVtZW50KVxyXG4gICAgIFxyXG4vL3Jlcy5zdGF0dXMoMjAwKS5qc29uKGVsZW1lbnQpO1xyXG4vL30pO1xyXG5cclxuLy9yZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xyXG4gICAgLy9yZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xyXG4gIFxyXG4gICAgICAgICAgLy9idWZmZXIgPSBidWZmZXIgKyBlbGVtZW50O1xyXG4gICAgICAgICAgLy9jb25zdCByZXN1bHRzID0gYXN5bmMgKCkgPT57XHJcbiAgICAgICAgICAvL2NvbnN0IGEgPSBhd2FpdCBjdXJzb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXN5bmMgcmV0dXJuIGJhY2sgdGhlIHJlY29yZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgLy9jb25zdCByZXN1bHRzID0gKCkgPT4gY3Vyc29yLnRoZW4oKCkpXHJcbiAgIFxyXG4gICAgLyoudGhlbihjdXJzb3IgPSAoKSA9PiB7XHJcbiAgICAgIGN1cnNvci50aGVuKChhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7Ki9cclxuICAgIFxyXG4gICAvLyBjb25zdCByZXN1bHRzID0gcHJpbnRBZGRyZXNzKCk7XHJcbiAgICAvL3Jlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdHMpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhcInF1ZXJ5IHJldHVybmVkIFwiKyBhKTtcclxuICBcclxuICAgIC8vICAgICAgfTtcclxuICAgICAgICAgIC8vcmVzLnN0YXR1cygyMDApLmpzb24ocHJpbnRBZGRyZXNzKTsgICBcclxuLy9jb25zb2xlLmxvZyhcIkZpbmFsIHJlc3VsdCBpcyBcIityZXN1bHRzKTtcclxuXHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIFxyXG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5ydW4oKS5jYXRjaChjb25zb2xlLmRpcik7XHJcbi8vcmVzLnN0YXR1cygyMDApLmpzb24oZWxlbWVudCk7XHJcbiAgXHJcbn0iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJnZXRDaGF0cyIsInJlcSIsInJlcyIsInVyaSIsImNsaWVudCIsInJ1biIsImRhdGFiYXNlIiwiZGIiLCJjb2wiLCJjb2xsZWN0aW9uIiwiY3Vyc29yIiwiZmluZCIsInByb2plY3QiLCJfaWQiLCJ1c2VybmFtZSIsImNvbnRlbnQiLCJ0b0FycmF5IiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsImpzb24iLCJjbG9zZSIsImNhdGNoIiwiZGlyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/getChats.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/getChats.js"));
module.exports = __webpack_exports__;

})();